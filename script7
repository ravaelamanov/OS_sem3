#!/bin/bash

for file in /etc/*
do
if [ -d "$file" ]; then
continue
fi
if [ -r "$file" ]; then
grep -E -o "[^@ ]+@[a-z0-9]+\.[^@ ]+" "$file" | awk '{printf "%s, ", $0}' >> emails.lst
fi
done

